<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>クイズ管理画面 - 主催者</title>
    <link rel="stylesheet" href="style.css" />
    <style>
      /* 管理画面用の追加CSS */
      body {
        background-color: #36393f;
      }
      .container {
        max-width: 800px;
      }
      #question-management {
        /* admin-controls がなくなるので、margin-top を調整するなど */
        margin-top: 20px;
        padding: 15px;
        background-color: #4a4f5d;
        border-radius: 8px;
      }
      .question-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 0;
        border-bottom: 1px solid #5a5f6e;
      }
      .question-item:last-child {
        border-bottom: none;
      }
      .question-item span {
        flex-grow: 1;
        text-align: left;
      }
      .question-item button {
        margin-left: 10px;
        padding: 5px 10px;
        cursor: pointer;
      }
      #add-question-form {
        margin-top: 20px;
        display: flex;
        flex-direction: column;
        gap: 10px;
        text-align: left;
      }
      #add-question-form input[type="text"] {
        padding: 8px;
        border-radius: 4px;
        border: 1px solid #5a5f6e;
        background-color: #3a3f4a;
        color: #f0f0f0;
      }
      #add-question-form button {
        padding: 10px 15px;
        background-color: #61dafb;
        color: #282c34;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
      .form-group {
        margin-bottom: 10px;
      }
      .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
      }
      /* 新たに追加: ステータス表示用のスタイル */
      #current-quiz-status {
        margin-top: 20px;
        padding: 15px;
        background-color: #4a4f5d;
        border-radius: 8px;
        text-align: left;
      }
      #current-quiz-status p {
        margin-bottom: 5px;
      }
      #nickname-reset-controls {
        margin-top: 20px;
        padding: 15px;
        background-color: #4a4f5d;
        border-radius: 8px;
        text-align: center;
      }
      #nickname-reset-controls button {
        background-color: #f44336; /* 赤色で目立たせる */
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 1.1em;
        cursor: pointer;
        transition: background-color 0.3s ease;
      }
      #nickname-reset-controls button:hover {
        background-color: #d32f2f;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>クイズ管理画面</h1>
      <p id="admin-status">サーバーに接続中...</p>
      <!-- 新たに読み取り専用のクイズステータス表示を追加 -->
      <div id="current-quiz-status">
        <h2>現在のクイズ状況</h2>
        <p>現在の接続中の参加者数: <span id="connected-users">0</span></p>
        <p>現在の問題: <span id="current-question-display">なし</span></p>
        <p>
          現在の問題インデックス: <span id="current-question-index">-1</span> /
          <span id="total-questions">0</span>
        </p>
        <p>クイズ状況: <span id="quiz-active-status">停止中</span></p>
      </div>

      <div id="nickname-reset-controls">
        <h2>参加者ニックネーム管理</h2>
        <button id="resetNicknamesBtn">参加者ニックネームをリセット</button>
      </div>

      <div id="question-management">
        <h2>問題管理</h2>
        <form id="add-question-form">
          <h3>新しい問題を追加</h3>
          <div class="form-group">
            <label for="questionText">問題文:</label>
            <input
              type="text"
              id="questionText"
              placeholder="問題文を入力"
              required
            />
          </div>
          <div class="form-group">
            <label for="optionA">選択肢 A:</label>
            <input type="text" id="optionA" placeholder="選択肢 A" required />
            <label>選択肢A 画像URL:</label>
            <input id="optionAImageUrl" type="text" placeholder="https://..." />
            <label>選択肢A 画像ファイル:</label>
            <input id="optionAImageFile" type="file" accept="image/*" />
          </div>
          <div class="form-group">
            <label for="optionB">選択肢 B:</label>
            <input type="text" id="optionB" placeholder="選択肢 B" required />
            <label>選択肢B 画像URL:</label>
            <input id="optionBImageUrl" type="text" placeholder="https://..." />
            <label>選択肢B 画像ファイル:</label>
            <input id="optionBImageFile" type="file" accept="image/*" />
          </div>
          <div class="form-group">
            <label for="optionC">選択肢 C:</label>
            <input type="text" id="optionC" placeholder="選択肢 C" required />
            <label>選択肢C 画像URL:</label>
            <input id="optionCImageUrl" type="text" placeholder="https://..." />
            <label>選択肢C 画像ファイル:</label>
            <input id="optionCImageFile" type="file" accept="image/*" />
          </div>
          <div class="form-group">
            <label for="optionD">選択肢 D:</label>
            <input type="text" id="optionD" placeholder="選択肢 D" required />
            <label>選択肢D 画像URL:</label>
            <input id="optionDImageUrl" type="text" placeholder="https://..." />
            <label>選択肢D 画像ファイル:</label>
            <input id="optionDImageFile" type="file" accept="image/*" />
          </div>
          <div class="form-group">
            <label for="correctOption">正解の選択肢ID (A, B, C, D):</label>
            <input
              type="text"
              id="correctOption"
              placeholder="例: B"
              required
              pattern="[ABCD]"
            />
          </div>

          <input type="hidden" id="editingQuestionId" value="" />

          <div style="display: flex; gap: 10px">
            <button id="submitQuestionBtn" type="submit">問題を追加</button>
            <button id="cancelEditBtn" type="button" style="display: none">
              編集をキャンセル
            </button>
          </div>
        </form>

        <h3>既存の問題</h3>
        <div id="question-list">
          <p>問題がありません。</p>
        </div>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="admin.js"></script>
  </body>
</html>
